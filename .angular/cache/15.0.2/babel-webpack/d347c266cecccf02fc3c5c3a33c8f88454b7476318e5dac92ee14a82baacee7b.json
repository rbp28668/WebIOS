{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../p3dcmd.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"../target/target.component\";\nfunction TrafficComponent_option_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const a_r11 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(a_r11);\n  }\n}\nfunction TrafficComponent_option_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const a_r12 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(a_r12);\n  }\n}\nfunction TrafficComponent_option_43_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const f_r13 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(f_r13);\n  }\n}\nexport class TrafficComponent {\n  constructor(p3dcmd) {\n    this.p3dcmd = p3dcmd;\n    // Available aricraft types\n    this.aircraft = new Array();\n    // IGC files\n    this.files = new Array();\n  }\n  logFailure(data) {\n    console.log(\"Failed: \" + data.reason + data.code);\n  }\n  ngOnInit() {\n    this.p3dcmd.trafficAircraft().subscribe(data => {\n      if (data.status === \"OK\") {\n        data.aircraft.forEach(aircraft => {\n          this.aircraft.push(aircraft.title);\n        });\n      } else {\n        // failed\n        this.logFailure(data);\n      }\n    }, err => {\n      console.log(\"Error fetching aircraft\");\n      console.log(err);\n    });\n    this.p3dcmd.igcList(\"\").subscribe(data => {\n      if (data.status === \"OK\") {\n        data.entries.forEach(file => {\n          this.files.push(file.filename);\n        });\n      } else {\n        // failed\n        this.logFailure(data);\n      }\n    }, err => {\n      console.log(\"Error fetching IGC files\");\n      console.log(err);\n    });\n  }\n  trafficLaunch(range, speedKts, bearing, name, tail_number, relative_height) {\n    console.log(range + \" \" + bearing + \" \" + speedKts);\n    this.p3dcmd.trafficLaunch(range, Number(speedKts), bearing, name, tail_number, Number(relative_height)).subscribe(data => {\n      if (data.status !== \"OK\") {\n        this.logFailure(data);\n      }\n    }, err => {\n      console.log(\"Error launching aircraft\");\n      console.log(err);\n    });\n  }\n  igcLaunch(igc_aircraft, igc_file, loop) {\n    this.p3dcmd.igcTraffic(igc_file, igc_aircraft, loop).subscribe(data => {\n      if (data.status !== \"OK\") {\n        this.logFailure(data);\n      }\n    }, err => {\n      console.log(\"Error launching igc aircraft\");\n      console.log(err);\n    });\n  }\n  igcClear() {\n    this.p3dcmd.igcClear().subscribe(data => {\n      if (data.status !== \"OK\") {\n        this.logFailure(data);\n      }\n    }, err => {\n      console.log(\"Error clearing igc aircraft\");\n      console.log(err);\n    });\n  }\n  // Returns the list of IGC files\n  getIGCFiles() {\n    return this.files;\n  }\n  // Returns the list of available aircraft\n  getAvailableAircraft() {\n    return this.aircraft;\n  }\n}\nTrafficComponent.ɵfac = function TrafficComponent_Factory(t) {\n  return new (t || TrafficComponent)(i0.ɵɵdirectiveInject(i1.P3dcmdService));\n};\nTrafficComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: TrafficComponent,\n  selectors: [[\"app-traffic\"]],\n  decls: 54,\n  vars: 3,\n  consts: [[1, \"top-container\"], [1, \"solid\"], [\"target\", \"\"], [1, \"inputfield\"], [\"for\", \"aircraft\"], [\"id\", \"aircraft\", 2, \"font-size\", \"20px\"], [\"aircraft\", \"\"], [4, \"ngFor\", \"ngForOf\"], [\"for\", \"speed\"], [\"type\", \"number\", \"id\", \"speed\", \"app-target.rangeplaceholder\", \"Speed in kts\", 2, \"font-size\", \"20px\"], [\"speed\", \"\"], [\"for\", \"tail_number\"], [\"type\", \"text\", \"id\", \"tail_number\", \"placeholder\", \"Tail number\", 2, \"font-size\", \"20px\"], [\"tail_number\", \"\"], [\"for\", \"relative_height\"], [\"type\", \"number\", \"id\", \"relative_height\", \"placeholder\", \"Relative height in feet\", 2, \"font-size\", \"20px\"], [\"relative_height\", \"\"], [1, \"action\", 3, \"click\"], [\"for\", \"igc-aircraft\"], [\"id\", \"igc-aircraft\", 2, \"font-size\", \"20px\"], [\"igc_aircraft\", \"\"], [\"for\", \"igc-file\"], [\"id\", \"igc-file\", 2, \"font-size\", \"20px\"], [\"igc_file\", \"\"], [\"for\", \"loop\"], [\"type\", \"checkbox\", \"id\", \"loop\"], [\"loop\", \"\"]],\n  template: function TrafficComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r14 = i0.ɵɵgetCurrentView();\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"fieldset\", 1)(2, \"legend\");\n      i0.ɵɵtext(3, \"Launch Traffic\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(4, \"app-target\", null, 2);\n      i0.ɵɵelementStart(6, \"div\", 3)(7, \"label\", 4);\n      i0.ɵɵtext(8, \"Aircraft Type\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"select\", 5, 6);\n      i0.ɵɵtemplate(11, TrafficComponent_option_11_Template, 2, 1, \"option\", 7);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(12, \"div\", 3)(13, \"label\", 8);\n      i0.ɵɵtext(14, \"Speed\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(15, \"input\", 9, 10);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"div\", 3)(18, \"label\", 11);\n      i0.ɵɵtext(19, \"Tail Number\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(20, \"input\", 12, 13);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"div\", 3)(23, \"label\", 14);\n      i0.ɵɵtext(24, \"Relative height\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(25, \"input\", 15, 16);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(27, \"button\", 17);\n      i0.ɵɵlistener(\"click\", function TrafficComponent_Template_button_click_27_listener() {\n        i0.ɵɵrestoreView(_r14);\n        const _r0 = i0.ɵɵreference(5);\n        const _r3 = i0.ɵɵreference(16);\n        const _r1 = i0.ɵɵreference(10);\n        const _r4 = i0.ɵɵreference(21);\n        const _r5 = i0.ɵɵreference(26);\n        return i0.ɵɵresetView(ctx.trafficLaunch(_r0.value, _r3.value, _r0.bearing, _r1.value, _r4.value, _r5.value));\n      });\n      i0.ɵɵtext(28, \"Launch\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(29, \"fieldset\", 1)(30, \"legend\");\n      i0.ɵɵtext(31, \"IGC Traffic\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(32, \"div\", 3)(33, \"label\", 18);\n      i0.ɵɵtext(34, \"Aircraft Type\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(35, \"select\", 19, 20);\n      i0.ɵɵtemplate(37, TrafficComponent_option_37_Template, 2, 1, \"option\", 7);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(38, \"div\", 3)(39, \"label\", 21);\n      i0.ɵɵtext(40, \"IGC File\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(41, \"select\", 22, 23);\n      i0.ɵɵtemplate(43, TrafficComponent_option_43_Template, 2, 1, \"option\", 7);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(44, \"div\", 3)(45, \"label\", 24);\n      i0.ɵɵtext(46, \"Loop file\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(47, \"input\", 25, 26);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(49, \"button\", 17);\n      i0.ɵɵlistener(\"click\", function TrafficComponent_Template_button_click_49_listener() {\n        i0.ɵɵrestoreView(_r14);\n        const _r6 = i0.ɵɵreference(36);\n        const _r8 = i0.ɵɵreference(42);\n        const _r10 = i0.ɵɵreference(48);\n        return i0.ɵɵresetView(ctx.igcLaunch(_r6.value, _r8.value, _r10.value === \"on\"));\n      });\n      i0.ɵɵtext(50, \"Launch\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(51, \"br\");\n      i0.ɵɵelementStart(52, \"button\", 17);\n      i0.ɵɵlistener(\"click\", function TrafficComponent_Template_button_click_52_listener() {\n        return ctx.igcClear();\n      });\n      i0.ɵɵtext(53, \"Clear IGC Traffic\");\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(11);\n      i0.ɵɵproperty(\"ngForOf\", ctx.getAvailableAircraft());\n      i0.ɵɵadvance(26);\n      i0.ɵɵproperty(\"ngForOf\", ctx.getAvailableAircraft());\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngForOf\", ctx.getIGCFiles());\n    }\n  },\n  dependencies: [i2.NgForOf, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i4.TargetComponent]\n});","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}